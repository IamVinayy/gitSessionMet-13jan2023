<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>
    <!-- in this example
        we cover 
        1) dom event handlers
        2) dom event listeners
        3) dom Manipulation
        4) anonymous function
    
    -->

    <div class="container">
        <h1 class="text-center">Form</h1>
        <ul style="list-style: none;">
            <h6>Add Name</h6>
            <li>
                <input type="text" name="" id="uname" class="form-control my-2" >
            </li>
            <h6>Add Age</h6>

            <li>
                <input type="text" name="" id="uage" class="form-control my-2">
            </li>
            <button class="btn btn-success my-2"> Add info  </button>
            <li class="err-msg"></li>
            <Table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Age</th>
                        <th>Delete info</th>
                    </tr>
                </thead>
                <tbody id="res">
                    

                </tbody>
            </Table>
        </ul>
    </div>



    <script>//event handling on button - i.e. adding event by j.s.
        document.querySelector('button').onclick = function(){
            //handling event by anonymous function
            console.log(Math.round(Math.random()*10));

            var name = document.getElementById('uname').value;
            var age = document.getElementById('uage').value;
            console.log(name,age);

            if(name==''||age==''){
                document.querySelector('.err-msg').innerHTML = 'Please provide all inputs.'
                document.querySelector('.err-msg').style.color = 'red';
            }
            else{
                document.querySelector('.err-msg').innerHTML = 'Data Added Successfully';
                document.querySelector('.err-msg').style.color = 'green'

                // dom manipulations - 1tr, 3td. 
                var trTag = document.createElement('tr');
                var tdTag1 = document.createElement('td');
                var tdTag2 = document.createElement('td');
                var tdTag3 = document.createElement('td');
                
                console.log(trTag);
                console.log(tdTag1);
                console.log(tdTag2);
                console.log(tdTag3);
                
                tdTag1.innerHTML = name; 
                tdTag2.innerHTML = age; 
                
                console.log(tdTag1);
                console.log(tdTag2);

                var btntag = document.createElement('button');
                console.log(btntag);
                btntag.className = 'btn btn-danger'
                btntag.innerHTML = 'X';
// -----Event listner on button tag
                btntag.addEventListener('click', deleteRow);

                tdTag3.appendChild(btntag);
                console.log(tdTag3);

                trTag.appendChild(tdTag1);
                trTag.appendChild(tdTag2);
                trTag.appendChild(tdTag3);

                console.log(trTag);

                var tbodyTag = document.querySelector('#res');
                tbodyTag.appendChild(trTag);
            }   
        }

        function deleteRow(){
            console.log('function working', Math.random());
            console.log(this.parentNode.parentNode);
            var ans = confirm('Delete row???');
            if(ans==true){

                this.parentNode.parentNode.remove(); 
            }else{
            
//--------Remove Function......................................................
            }
        }

    </script>
</body>

</html>